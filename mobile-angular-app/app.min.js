function onGoogleReady(){angular.bootstrap(document.getElementById("map"),["uiGmapgoogle-maps"])}!function(){function a(a){a.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault()})}function b(a,b,c){a.state("app",{"abstract":!0,templateUrl:"templates/layout.html",controller:"MenuCtrl as menuCtrl"}),a.state("app.twitter",{url:"/twitter",views:{content:{templateUrl:"templates/twitter.html",controller:"TwitterCtrl as twitterCtrl"}}}),a.state("app.speakers",{url:"/speakers",views:{content:{templateUrl:"templates/speakers.html",controller:"SpeakerCtrl as speakerCtrl"}}}),a.state("app.speakers.detail",{url:"/:speakerId",views:{"content@app":{templateUrl:"templates/speaker-detail.html",controller:"SpeakerDetailCtrl as speakerDetailCtrl"}}}),a.state("app.sessions",{url:"/sessions",views:{content:{templateUrl:"templates/sessions.html",controller:"SessionCtrl as sessionCtrl"}},resolve:{conferenceDays:["SessionService",function(a){return a.findAll()}]}}),a.state("app.sessions.detail",{url:"/:sessionId",views:{"content@app":{templateUrl:"templates/session-detail.html",controller:"SessionDetailCtrl"}}}),a.state("app.map",{url:"/map/:location",views:{content:{templateUrl:"templates/map.html",controller:"MapCtrl as mapCtrl"}},resolve:{highlightLocation:["$stateParams","MapService",function(a,b){return void 0!==a.location&&0!==a.location.length?b.locations.findByName({name:a.location}).$promise:null}]}}),b.otherwise("/twitter"),c.views.transition("android")}angular.module("ehfgApp",["ionic","ngResource","ehfgApp.twitter","ehfgApp.menu","ehfgApp.speakers","ehfgApp.sessions","ehfgApp.map","ehfgApp.storage","ehfgApp.config"]).config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",b]).run(["$ionicPlatform",a])}(),function(){var a="http://localhost:8888/rest";angular.module("ehfgApp.config",[]).value("BASE_URL",a)}(),function(){function a(a,b){this.zoom=16,this.points=a.points.findAll(),null===b?this.center={latitude:47.170329,longitude:13.103852}:(this.highlightLocation=b,this.center={latitude:b.coordinate.latitude,longitude:b.coordinate.longitude})}function b(a,b){return{locations:new a(b+"/location/:method/:name?callback=JSON_CALLBACK",{},{findAll:{method:"JSONP",isArray:!0,params:{method:"all"}},findByName:{method:"JSONP",params:{method:"name",name:"@name"}}}),points:new a(b+"/points/all?callback=JSON_CALLBACK",{},{findAll:{method:"JSONP",isArray:!0,transformResponse:function(a){for(var b in a)a[b].icon="img/marker.png";return a}}})}}angular.module("ehfgApp.map",["uiGmapgoogle-maps"]).controller("MapCtrl",["MapService","highlightLocation",a]).factory("MapService",["$resource","BASE_URL",b])}(),function(){var a=function(a,b,c,d){this.favouriteSessions=d.getFavouriteSessionFlag(),this.favouriteSessionToggle=function(a){a===!0?d.showFavouriteSessions():d.showAllSessions()},this.openSideMenu=function(){a.toggleRight()},this.showAboutDialog=function(){b.show({template:'<p>The European Health Forum Gastein is an annual international conference where stakeholders withinthe field of healthcare and public health meet to discuss a broad spectrum of major topics.</p><p>The theme of this year is "Electing Health-The Europe We Want."</p><p>Please direct any questions or concerns to <a href="mailto:info@ehfg.org">info@ehfg.org</a></p>',title:"About",buttons:[{text:"Exit"}]})},this.resetData=function(){localStorage.clear(),console.log(c)}};angular.module("ehfgApp.menu",[]).controller("MenuCtrl",["$ionicSideMenuDelegate","$ionicPopup","$window","SessionService",a])}(),function(){var a=function(a){this.conferenceDays=a},b=function(a,b,c,d){a.addToFavourites=c.addToFavourites,a.removeFromFavourites=c.removeFromFavourites,c.findById(b.sessionId).then(function(b){a.session=b,a.session.isInFavourites=c.isFavouriteSession(b.id),d.findByIds(b.speakers).then(function(b){a.speakers=b})}),a.addToFavourites=function(){a.session.isInFavourites=!0,c.addToFavourites(a.session.id)},a.removeFromFavourites=function(){a.session.isInFavourites=!1,c.removeFromFavourites(a.session.id)}},c=function(a){return function(b){if(a.getFavouriteSessionFlag()===!1)return b;var c=[],d=a.findFavouriteSessions();for(var e in b){var f=b[e];-1!==d.indexOf(f.id)&&c.push(f)}return c}},d=function(a,b){return a(b+"/session/all?callback=JSON_CALLBACK",{},{findAll:{method:"JSONP",isArray:!0}})},e=function(a,b,c){function d(){var d=c.findSessions();return 0===d.length?b.findAll(function(a){c.setSessions(a)}).$promise:a.when(d)}function e(b){return this.findAll().then(function(c){for(var d in c){var e=c[d];for(var f in e.sessions){var g=e.sessions[f];if(g.id==b)return a.when(g)}}return null})}function f(b){return this.findAll().then(function(c){var d=[];for(var e in c){var f=c[e];for(var g in f.sessions){var h=f.sessions[g];for(var i in h.speakers)if(h.speakers[i]===b){d.push(h);break}}}return a.when(d)})}function g(){c.setFavouriteSessionSelected(!1)}function h(){c.setFavouriteSessionSelected(!0)}function i(){return c.showFavouriteSessionsSelected()}function j(){return c.findFavouriteSessions()}function k(a){return-1!==this.findFavouriteSessions().indexOf(a)}function l(a){c.addToFavouriteSessions(a)}function m(a){c.removeFromFavouriteSessions(a)}return{findAll:d,findById:e,findBySpeakerId:f,showAllSessions:g,showFavouriteSessions:h,getFavouriteSessionFlag:i,isFavouriteSession:k,findFavouriteSessions:j,addToFavourites:l,removeFromFavourites:m}};angular.module("ehfgApp.sessions",[]).controller("SessionCtrl",["conferenceDays",a]).controller("SessionDetailCtrl",["$scope","$stateParams","SessionService","SpeakerService",b]).filter("favouriteSessions",["SessionService",c]).factory("SessionService",["$q","SessionResource","LocalStorageService",e]).factory("SessionResource",["$resource","BASE_URL",d])}(),function(){var a=function(a){var b=this;a.findAll().then(function(a){b.speakers=a}),b.filter=""},b=function(a,b,c){var d=this;b.findById(a.speakerId).then(function(a){d.speaker=a}),c.findBySpeakerId(a.speakerId).then(function(a){d.sessions=a})},c=function(a,b){return a(b+"/speaker/all?callback=JSON_CALLBACK",{},{findAll:{method:"JSONP",isArray:!0}})},d=function(a,b,c){function d(){var d=b.findSpeakers();return 0===d.length?c.findAll(function(a){b.setSpeakers(a)}).$promise:a.when(d)}function e(b){return this.findAll().then(function(c){for(var d in c)if(c[d].id===b)return a.when(c[d]);return null})}function f(b){return this.findAll().then(function(c){var d=[];for(var e in c)-1!==b.indexOf(c[e].id)&&d.push(c[e]);return a.when(d)})}return{findAll:d,findById:e,findByIds:f}};angular.module("ehfgApp.speakers",[]).controller("SpeakerCtrl",["SpeakerService",a]).controller("SpeakerDetailCtrl",["$stateParams","SpeakerService","SessionService",b]).factory("SpeakerResource",["$resource","BASE_URL",c]).factory("SpeakerService",["$q","LocalStorageService","SpeakerResource",d])}(),function(){function a(){function a(a){return JSON.parse(localStorage.getItem(a))||[]}function b(a){localStorage.setItem(l,JSON.stringify(a))}function c(){return a(l)}function d(a){localStorage.setItem(m,JSON.stringify(a))}function e(){return a(m)}function f(){return a(n)}function g(a){localStorage.setItem(o,a)}function h(){var a=JSON.parse(localStorage.getItem(o));return null===a?(localStorage.setItem(o,!1),!1):a}function i(a){var b=this.findFavouriteSessions();b.push(a),localStorage.setItem(n,JSON.stringify(b))}function j(a){var b=this.findFavouriteSessions();b.splice(a,1),localStorage.setItem(n,JSON.stringify(b))}function k(){localStorage.clear()}var l="SPEAKERS",m="SESSIONS",n="FAVOURITE_SESSIONS",o="SHOW_FAVOURITE_SESSIONS";return{setSpeakers:b,findSpeakers:c,setSessions:d,findSessions:e,findFavouriteSessions:f,showFavouriteSessionsSelected:h,setFavouriteSessionSelected:g,addToFavouriteSessions:i,removeFromFavouriteSessions:j,resetData:k}}angular.module("ehfgApp.storage",[]).factory("LocalStorageService",a)}(),function(){var a=function(a){this.tweetResource=a.tweetData,this.loadMoreTweets=a.loadMoreTweets,this.updateFeed=a.updateFeed,a.init()},b=function(a){function b(a){f.morePages=a.morePages,f.currentPage=a.currentPage,f.currentHashtag=a.currentHashtag}function c(){a.findInitial(function(a){b(a),f.tweets=a.data})}function d(){a.findMore({page:f.currentPage+1},function(a){b(a),f.tweets=f.tweets.concat(a.data)})}function e(){if(null!==f&&null!==f.tweets[0]){var b=f.tweets[0];a.findNewer({lastTweet:b.timestamp},function(a){f.tweets=a.concat(f.tweets)})}}var f={};return{init:c,tweetData:f,updateFeed:e,loadMoreTweets:d}},c=function(a,b){var c=new a(b+"/twitter/tweetpage/:page?callback=JSON_CALLBACK",{page:0},{findInitial:{method:"JSONP",isArray:!1},findMore:{method:"JSONP",isArray:!1,params:{page:"@page"}}}),d=new a(b+"/twitter/update/:lastTweet?callback=JSON_CALLBACK",{lastTweet:"@lastTweet"},{findNewer:{method:"JSONP",isArray:!0}});return{findMore:c.findMore,findNewer:d.findNewer,findInitial:c.findInitial}};angular.module("ehfgApp.twitter",[]).controller("TwitterCtrl",["TwitterService",a]).factory("TwitterResource",["$resource","BASE_URL",c]).factory("TwitterService",["TwitterResource",b])}();